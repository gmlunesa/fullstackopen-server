(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),o=t.n(a),u=t(15),r=t.n(u),s=t(6),i=t(3),l=function(e){var n=e.value,t=e.onChange;return Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.onSubmit,t=e.nameValue,a=e.nameOnChange,o=e.numberValue,u=e.numberOnChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:o,onChange:u})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},m=function(e){var n=e.persons,t=e.onClick;return n.map((function(e){return Object(c.jsxs)("p",{children:[e.name," : ",e.number,"\xa0",Object(c.jsx)("button",{onClick:function(){return t(e)},children:"Delete"})]},e.name)}))},b=function(e){var n=e.alert;return 0===Object.keys(n).length?null:Object(c.jsx)("div",{className:n.className,children:n.message})},j=t(4),f=t.n(j),h="/api/persons",O={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},add:function(e){return f.a.post(h,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e}))}},g=(t(38),function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),r=Object(i.a)(u,2),j=r[0],f=r[1],h=Object(a.useState)(""),g=Object(i.a)(h,2),p=g[0],v=g[1],x=Object(a.useState)(""),C=Object(i.a)(x,2),S=C[0],w=C[1],N=Object(a.useState)(!0),k=Object(i.a)(N,2),y=k[0],T=k[1],A=Object(a.useState)({}),V=Object(i.a)(A,2),D=V[0],I=V[1];Object(a.useEffect)((function(){O.getAll().then((function(e){o(e)}))}),[]);var P=y?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(b,{alert:D}),Object(c.jsx)(l,{value:S,onChange:function(e){console.log(e.target.value),w(e.target.value),""===e.target.value?T(!0):T(!1)}}),Object(c.jsx)("h2",{children:"Add a new person"}),Object(c.jsx)(d,{onSubmit:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name===j}));if(n>-1){if(window.confirm("".concat(j," is already added to the phonebook, replace the old number with a new one?"))){var c=Object(s.a)(Object(s.a)({},t[n]),{},{number:p});console.log(c,t[n]),O.update(t[n].id,c).then((function(e){o(t.map((function(n){return n.name===e.name?e:n}))),I({message:"Successfully updated ".concat(e.name,"."),className:"success"}),setTimeout((function(){I({})}),5e3)})).catch((function(e){I({message:"Information on ".concat(c.name," has already been removed from the server."),className:"error"}),setTimeout((function(){I({})}),5e3)}))}}else{var a={name:j,number:p};O.add(a).then((function(e){o(t.concat(e)),I({message:"Successfully added ".concat(a.name,"."),className:"success"}),setTimeout((function(){I({})}),5e3)})).catch((function(e){console.log("hey!"),console.log(e.response.data),I({message:e.response.data.error,className:"error"}),setTimeout((function(){I({})}),5e3)}))}f(""),v("")},nameValue:j,nameOnChange:function(e){f(e.target.value)},numberValue:p,numberOnChange:function(e){v(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(m,{persons:P,onClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(O.deletePerson(e.id).then((function(){I({message:"Successfully deleted ".concat(e.name,"."),className:"deleted"}),setTimeout((function(){I({})}),5e3)})),o(t.filter((function(n){return n.name!==e.name}))))}})]})});r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4de2c468.chunk.js.map